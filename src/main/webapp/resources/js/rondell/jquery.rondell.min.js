/*!
jQuery rondell plugin
@name jquery.rondell.js
@author Sebastian Helzle (sebastian@helzle.net or @sebobo)
@version 1.0.2
@date 2013-04-01
@category jQuery plugin
@copyright (c) 2009-2013 Sebastian Helzle (www.sebastianhelzle.net)
@license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
*/
var __bind=function(t,i){return function(){return t.apply(i,arguments)}};(function(t){var i,e,s,n,o,r,h,l,a,d,c,u;return t.rondell||(t.rondell={version:"1.0.2",name:"rondell",lightbox:{instance:void 0,template:t.trim('        <div class="rondell-lightbox">          <div class="rondell-lightbox-overlay">&nbsp;</div>          <div class="rondell-lightbox-content">            <div class="rondell-lightbox-inner"/>            <div class="rondell-lightbox-close">&Chi;</div>            <div class="rondell-lightbox-prev">&nbsp;</div>            <div class="rondell-lightbox-position">1</div>            <div class="rondell-lightbox-next">&nbsp;</div>          </div>        </div>')},defaults:{showContainer:!0,classes:{container:"rondell-container",initializing:"rondell-initializing",themePrefix:"rondell-theme",caption:"rondell-caption",noScale:"no-scale",item:"rondell-item",image:"rondell-item-image",resizeable:"rondell-item-resizeable",small:"rondell-item-small",hidden:"rondell-item-hidden",loading:"rondell-item-loading",hovered:"rondell-item-hovered",overlay:"rondell-item-overlay",focused:"rondell-item-focused",crop:"rondell-item-crop",error:"rondell-item-error",control:"rondell-control",shiftLeft:"rondell-shift-left",shiftRight:"rondell-shift-right"},currentLayer:0,container:null,radius:{x:250,y:50},center:{left:340,top:160},size:{width:null,height:null},visibleItems:"auto",scaling:2,opacityMin:.05,fadeTime:300,keyDelay:300,zIndex:1e3,itemProperties:{delay:100,size:{width:150,height:150},sizeFocused:{width:0,height:0}},lightbox:{enabled:!0,displayReferencedImages:!0},imageFiletypes:["png","jpg","jpeg","gif","bmp"],repeating:!0,wrapIndices:!0,switchIndices:!1,alwaysShowCaption:!1,captionsEnabled:!0,autoRotation:{enabled:!1,paused:!1,direction:0,once:!1,delay:5e3},controls:{enabled:!0,fadeTime:400,margin:{x:130,y:270}},strings:{prev:"prev",next:"next",loadingError:"An error occured while loading <b>%s</b>",more:"More..."},mousewheel:{enabled:!0,threshold:0,minTimeBetweenShifts:500},touch:{enabled:!0,preventDefaults:!0,threshold:100},randomStart:!1,funcEase:"easeInOutQuad",theme:"default",preset:"",effect:null,onAfterShift:null,cropThumbnails:!1,scrollbar:{enabled:!1,orientation:"bottom",start:1,end:100,stepSize:1,keepStepOrder:!0,position:1,padding:10,style:{width:"100%",height:20,left:"auto",right:"auto",top:"auto",bottom:"auto"},repeating:!1,onScroll:void 0,scrollOnHover:!1,scrollOnDrag:!0,animationDuration:300,easing:"easeInOutQuad",classes:{container:"rondell-scrollbar",control:"rondell-scrollbar-control",dragging:"rondell-scrollbar-dragging",background:"rondell-scrollbar-background",scrollLeft:"rondell-scrollbar-left",scrollRight:"rondell-scrollbar-right",scrollInner:"rondell-scrollbar-inner"}}}}),(u=t.easing).easeInOutQuad||(u.easeInOutQuad=function(t,i,e,s,n){return 1>(i/=n/2)?s/2*i*i+e:-s/2*(--i*(i-2)-1)+e}),o=function(t,i){return setTimeout(i,t)},e=t(window),i=t(document),s=function(){function s(i,e,n,o){var r,h;null==o&&(o=void 0),this.showLightbox=__bind(this.showLightbox,this),this.keyDown=__bind(this.keyDown,this),this.isFocused=__bind(this.isFocused,this),this.onWindowBlur=__bind(this.onWindowBlur,this),this.onWindowFocus=__bind(this.onWindowFocus,this),this._autoShift=__bind(this._autoShift,this),this._autoShiftInit=__bind(this._autoShiftInit,this),this.shiftRight=__bind(this.shiftRight,this),this.shiftLeft=__bind(this.shiftLeft,this),this._refreshControls=__bind(this._refreshControls,this),this.getIndexInRange=__bind(this.getIndexInRange,this),this.getRelativeItemPosition=__bind(this.getRelativeItemPosition,this),this.shiftTo=__bind(this.shiftTo,this),this._hover=__bind(this._hover,this),this._onTouch=__bind(this._onTouch,this),this._onMousewheel=__bind(this._onMousewheel,this),this.bindEvents=__bind(this.bindEvents,this),this._start=__bind(this._start,this),this.onItemInit=__bind(this.onItemInit,this),this._loadItem=__bind(this._loadItem,this),this._getItem=__bind(this._getItem,this),this._onMouseLeaveItem=__bind(this._onMouseLeaveItem,this),this._onMouseEnterItem=__bind(this._onMouseEnterItem,this),this.fitToContainer=__bind(this.fitToContainer,this),this.id=++s.rondellCount,this.items=[],this.maxItems=n,this.loadedItems=0,this.initCallback=o,1===this.id&&(s.activeRondell=this.id),(null!=e?e.preset:void 0)in t.rondell.presets?t.extend(!0,this,t.rondell.defaults,t.rondell.presets[e.preset],e||{}):t.extend(!0,this,t.rondell.defaults,e||{}),t.extend(!0,this,{_dimensions:{computed:!1},_lastKeyEvent:0,_windowFocused:!0,_focusedIndex:this.currentLayer,_itemIndices:{0:0},autoRotation:{_timer:-1},controls:{_lastShift:0},touch:{_start:void 0,_end:void 0},scrollbar:{_instance:null}}),this.itemProperties.sizeFocused={width:this.itemProperties.sizeFocused.width||this.itemProperties.size.width*this.scaling,height:this.itemProperties.sizeFocused.height||this.itemProperties.size.height*this.scaling},this.size={width:this.size.width||2*this.center.left,height:this.size.height||2*this.center.top},r=t("<div/>").css(this.size).addClass(""+this.classes.initializing+" "+this.classes.container+" "+this.classes.themePrefix+"-"+this.theme),this.container=i.wrapAll(r).parent().addClass("rondell-instance-"+this.id).data("api",this),this.showContainer&&this.container.parent().show(),this.scrollbar.enabled&&(h=t("<div/>"),this.container.append(h),t.extend(!0,this.scrollbar,{onScroll:this.shiftTo,end:this.maxItems,position:this.currentLayer,repeating:this.repeating}),this.scrollbar._instance=new t.rondell.RondellScrollbar(h,this.scrollbar))}return s.rondellCount=0,s.activeRondell=null,s.prototype.log=function(t){return"undefined"!=typeof console&&null!==console?console.log(t):void 0},s.prototype.equals=function(t,i){var e,s;for(e in t)if(s=t[e],i[e]!==s)return!1;for(e in i)if(s=i[e],t[e]!==s)return!1;return!0},s.prototype.funcLeft=function(t,i){return i.center.left-i.itemProperties.size.width/2+Math.sin(t)*i.radius.x},s.prototype.funcTop=function(t,i){return i.center.top-i.itemProperties.size.height/2+Math.cos(t)*i.radius.y},s.prototype.funcDiff=function(t,i){return Math.pow(Math.abs(t)/i.maxItems,.5)*Math.PI},s.prototype.funcOpacity=function(t,i){return i.visibleItems>1?Math.max(0,1-Math.pow(t/i.visibleItems,2)):0},s.prototype.funcSize=function(){return 1},s.prototype.fitToContainer=function(){var i,e,s,n,o;return o=this.container.parent(),e=o.innerWidth(),i=o.innerHeight(),this._dimensions.computed||(n=this.size.width,s=this.size.height,t.extend(!0,this._dimensions,{computed:!0,center:{left:this.center.left/n,top:this.center.top/s},radius:{x:this.radius.x/n,y:this.radius.y/s},controls:{margin:{x:this.controls.margin.x/n,y:this.controls.margin.y/s}},itemProperties:{size:{width:this.itemProperties.size.width/n,height:this.itemProperties.size.height/s},sizeFocused:{width:this.itemProperties.sizeFocused.width/n,height:this.itemProperties.sizeFocused.height/s}}})),t.extend(!0,this,{size:{width:e,height:i},center:{left:this._dimensions.center.left*e,top:this._dimensions.center.top*i},radius:{x:this._dimensions.radius.x*e,y:this._dimensions.radius.y*i},controls:{margin:{x:this._dimensions.controls.margin.x*e,y:this._dimensions.controls.margin.y*i}},itemProperties:{size:{width:this._dimensions.itemProperties.size.width*e,height:this._dimensions.itemProperties.size.height*i},sizeFocused:{width:this._dimensions.itemProperties.sizeFocused.width*e,height:this._dimensions.itemProperties.sizeFocused.height*i}}}),this.container.css(this.size),this.shiftTo(this.currentLayer)},s.prototype._onMouseEnterItem=function(t){return this._getItem(t).onMouseEnter()},s.prototype._onMouseLeaveItem=function(t){return this._getItem(t).onMouseLeave()},s.prototype._getItem=function(t){return this.items[t-1]},s.prototype._loadItem=function(i,e){var s;return s=new t.rondell.RondellItem(i,e,this),this.items[i-1]=s,this._itemIndices[i]=i,s.init(),++this.loadedItems===this.maxItems?this._start():void 0},s.prototype.onItemInit=function(t){var i;return i=this._getItem(t),t===this.currentLayer?i.prepareFadeIn():i.prepareFadeOut(),i.runAnimation(!0)},s.prototype._start=function(){var i,e;return this.currentLayer=this.randomStart?Math.round(Math.random()*(this.maxItems-1)):Math.max(0,Math.min(this.currentLayer||Math.round(this.maxItems/2),this.maxItems)),"auto"===this.visibleItems&&(this.visibleItems=Math.max(2,Math.floor(this.maxItems/2))),i=this.controls,i.enabled&&(this.controls._shiftLeft=t('<a href="#/"/>').addClass(""+this.classes.control+" "+this.classes.shiftLeft).html(this.strings.prev).click(this.shiftLeft).css({left:i.margin.x,top:i.margin.y,zIndex:this.zIndex+this.maxItems+2}),this.controls._shiftRight=t('<a href="#/"/>').addClass(""+this.classes.control+" "+this.classes.shiftRight).html(this.strings.next).click(this.shiftRight).css({right:i.margin.x,top:i.margin.y,zIndex:this.zIndex+this.maxItems+2}),this.container.append(this.controls._shiftLeft,this.controls._shiftRight)),this.bindEvents(),this.container.removeClass(this.classes.initializing),"function"==typeof this.initCallback&&this.initCallback(this),null==(e=this._focusedItem)&&(this._focusedItem=this._getItem(this.currentLayer)),this.shiftTo(this.currentLayer)},s.prototype.bindEvents=function(){var s;return i.keydown(this.keyDown),e.blur(this.onWindowBlur).focus(this.onWindowFocus),i.focusout(this.onWindowBlur).focusin(this.onWindowFocus),this.mousewheel.enabled&&null!=t.fn.mousewheel&&this.container.bind("mousewheel.rondell",this._onMousewheel),this._onMobile()?this.touch.enabled&&this.container.bind("touchstart.rondell touchmove.rondell touchend.rondell",this._onTouch):this.container.bind("mouseenter.rondell mouseleave.rondell",this._hover),s=this,this.container.delegate("."+this.classes.item,"click.rondell",function(i){var e;if(e=t(this).data("item"),s._focusedItem.id===e.id){if(s.lightbox.enabled)return i.preventDefault(),s.showLightbox()}else if(i.preventDefault(),!e.hidden&&e.object.is(":visible"))return s.shiftTo(e.currentSlot)}).delegate("."+this.classes.item,"mouseenter.rondell mouseleave.rondell",function(i){var e;return e=t(this).data("item"),"mouseenter"===i.type?s._onMouseEnterItem(e.id):s._onMouseLeaveItem(e.id)})},s.prototype._onMobile=function(){return"undefined"!=typeof Modernizr&&null!==Modernizr?Modernizr.touch:void 0},s.prototype._onMousewheel=function(t,i,s){var n,o,r,h;if(this.mousewheel.enabled&&this.isFocused()&&(n=(new Date).getTime(),!(n-this.mousewheel._lastShift<this.mousewheel.minTimeBetweenShifts)))return h=e.scrollTop(),r=h+e.height(),o=this.container.offset().top+this.container.outerHeight()/2,o>h&&r>o&&Math.abs(s)>this.mousewheel.threshold?(t.preventDefault(),0>s?this.shiftLeft():this.shiftRight(),this.mousewheel._lastShift=n):void 0},s.prototype._onTouch=function(t){var i,e;if(this.touch.enabled){switch(e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],t.type){case"touchstart":this.touch._start={x:e.pageX,y:e.pageY};break;case"touchmove":this.touch.preventDefaults&&t.preventDefault(),this.touch._end={x:e.pageX,y:e.pageY};break;case"touchend":this.touch._start&&this.touch._end&&(i=this.touch._end.x-this.touch._start.x,Math.abs(i)>this.touch.threshold&&(i>0?this.shiftLeft():0>i&&this.shiftRight()),this.touch._start=this.touch._end=void 0)}return!0}},s.prototype._hover=function(t){var i;return i=this.autoRotation.paused,"mouseenter"===t.type?(s.activeRondell=this.id,this.hovering=!0,i||(this.autoRotation.paused=!0,this._focusedItem.showCaption())):(this.hovering=!1,i&&!this.autoRotation.once&&(this.autoRotation.paused=!1,this._autoShiftInit()),this.alwaysShowCaption||this._focusedItem.hideCaption()),this.controls.enabled?this._refreshControls():void 0},s.prototype.shiftTo=function(t,i){var e,s,n,o,r,h,a,d,c,u,p,m,f;if(null==i&&(i=!1),null!=t){for(!i&&this.switchIndices&&t!==this.currentLayer&&this.getIndexInRange(t)===this._focusedItem.currentSlot&&(p=this.getRelativeItemPosition(t,!0),e=p[0],r=p[1],r>this.currentLayer?t++:t--),t=this.getIndexInRange(t),o=this._itemIndices[t],n=this._getItem(o),this.switchIndices&&(this._itemIndices[t]=this._focusedItem.id,this._itemIndices[this._focusedItem.currentSlot]=o,n.currentSlot=this._focusedItem.currentSlot,this._focusedItem.currentSlot=t),this._focusedItem=n,this.currentLayer=t,this._focusedItem.prepareFadeIn(),m=this.items,a=0,c=m.length;c>a;a++)s=m[a],s!==this._focusedItem&&s.prepareFadeOut();for(f=this.items,d=0,u=f.length;u>d;d++)s=f[d],s.runAnimation();return this._autoShiftInit(),this._refreshControls(),this.lightbox.enabled&&l()&&this.showLightbox(),this.scrollbar.enabled&&(h=t,t===this._focusedItem.currentSlot&&(h=this._focusedItem.currentSlot+1),this.scrollbar._instance.setPosition(h,!1)),"function"==typeof this.onAfterShift?this.onAfterShift(t):void 0}},s.prototype.getRelativeItemPosition=function(t,i){var e,s;return null==i&&(i=this.wrapIndices),e=Math.abs(t-this.currentLayer),s=t,e>this.visibleItems&&e>this.maxItems/2&&this.repeating&&i&&(t>this.currentLayer?s-=this.maxItems:s+=this.maxItems,e=Math.abs(s-this.currentLayer)),[e,s]},s.prototype.getIndexInRange=function(t){return this.repeating?1>t?t+=this.maxItems:t>this.maxItems&&(t-=this.maxItems):1>t?t=1:t>this.maxItems&&(t=this.maxItems),t},s.prototype._refreshControls=function(){return this.controls.enabled?(this.controls._shiftLeft.stop().fadeTo(this.controls.fadeTime,(this.currentLayer>1||this.repeating)&&this.hovering?1:0),this.controls._shiftRight.stop().fadeTo(this.controls.fadeTime,(this.currentLayer<this.maxItems||this.repeating)&&this.hovering?1:0)):void 0},s.prototype.shiftLeft=function(t){return null!=t&&t.preventDefault(),this.shiftTo(this.currentLayer-1)},s.prototype.shiftRight=function(t){return null!=t&&t.preventDefault(),this.shiftTo(this.currentLayer+1)},s.prototype._autoShiftInit=function(){var t;return t=this.autoRotation,this.isActive()&&t.enabled&&0>t._timer?t._timer=window.setTimeout(this._autoShift,t.delay):void 0},s.prototype._autoShift=function(){return this.autoRotation._timer=-1,this.isActive()&&this.isFocused()&&!l()&&!this.autoRotation.paused?this.autoRotation.direction?this.shiftRight():this.shiftLeft():this._autoShiftInit()},s.prototype.onWindowFocus=function(){return this._windowFocused=!0},s.prototype.onWindowBlur=function(){return this._windowFocused=!1},s.prototype.isActive=function(){return!0},s.prototype.isFocused=function(){return this._windowFocused&&s.activeRondell===this.id},s.prototype.keyDown=function(t){var i,e;if(this.isActive()&&this.isFocused()&&(e=(new Date).getTime(),!(this._lastKeyEvent>e-this.keyDelay)))switch(this.autoRotation._timer>=0&&(window.clearTimeout(this.autoRotation._timer),this.autoRotation._timer=-1),this._lastKeyEvent=e,i=t.which||t.keyCode){case 37:return this.shiftLeft(t);case 39:return this.shiftRight(t);case 27:return n()}},s.prototype.showLightbox=function(){var i,e,s=this;return i=h(),e=t(".rondell-lightbox-content",i),l()||i.add(e).css("display","none"),e.stop().fadeTo(100,0,function(){var i,n,o,r,h,l,a,d,u;if(n=t(".rondell-lightbox-inner",e).html(s._focusedItem.object.html()),t(".rondell-lightbox-position").text(""+s.currentLayer+" | "+s.maxItems),t("."+s.classes.overlay,n).style="",s._focusedItem.isLink&&(l=s._focusedItem.object.attr("href"),h=s._focusedItem.object.attr("target"),t("."+s.classes.caption,n).append("<a href='"+l+"' target='"+h+"'>"+s.strings.more+"</a>").attr("style","")),o=t("."+s.classes.image,n),o&&s._focusedItem.referencedImage){for(u=["style","width","height"],a=0,d=u.length;d>a;a++)i=u[a],o.removeAttr(i);o[0].src=s._focusedItem.referencedImage}return o&&!o[0].complete?(r=t('<img style="display:none"/>'),e.append(s.iconCopy),r.one("load",c)[0].src=s._focusedItem.referencedImage):setTimeout(c,0)})},s}(),r=function(){return t(".rondell-instance-"+s.activeRondell).data("api")},d=0,a=function(){return clearTimeout(d),d=setTimeout(c,200)},l=function(){var i;return null!=(i=t.rondell.lightbox.instance)?i.is(":visible"):void 0},n=function(){return l()?h().stop().fadeOut(150):void 0},h=function(){var i;return t.rondell.lightbox.instance||(i=t.rondell.lightbox.instance=t(t.rondell.lightbox.template).appendTo(t("body")),t(".rondell-lightbox-overlay, .rondell-lightbox-close",i).bind("click.rondell",n),t(".rondell-lightbox-prev",i).bind("click.rondell",function(){return r().shiftLeft()}),t(".rondell-lightbox-next",i).bind("click.rondell",function(){return r().shiftRight()}),e.bind("resize.rondell",a),i.bind("mousewheel.rondell",function(t,i,e,s){return r()._onMousewheel(t,i,e,s)})),t.rondell.lightbox.instance},c=function(){var i,s,n,o,l,a,d,c,u,p,m,f,g,b,_;return i=h(),s=t(".rondell-lightbox-content",i),b=e.innerWidth(),g=e.innerHeight(),_=20,n=r()._focusedItem,o=t("img:first",s),o.length&&(n.lightboxImageWidth||(n.lightboxImageWidth=o[0].width,n.lightboxImageHeight=o[0].height),d=n.lightboxImageWidth,a=n.lightboxImageHeight,l=d/a,u=b-2*_,c=g-2*_,d>u&&(d=u,a=d/l),a>c&&(a=c,d=a*l),o.attr("width",d).attr("height",a)),i.css("display","block"),f=s.outerWidth(),p=s.outerHeight(),m={marginLeft:-f/2,top:Math.max((g-p)/2,20)},1>s.css("opacity")?s.css(m).fadeTo(200,1):(m.opacity=1,s.animate(m,200)),i.stop().fadeTo(150,1)},t.fn.rondell=function(i,e){var n;return null==i&&(i={}),null==e&&(e=void 0),n=new s(this,i,this.length,e),this.each(function(i){return n._loadItem(i+1,t(this))}),n}})(jQuery),function(t){return t.rondell||(t.rondell={}),t.rondell.presets={carousel:{autoRotation:{enabled:!0,direction:1,once:!1,delay:5e3},radius:{x:240,y:50},center:{left:340,top:160},controls:{margin:{x:130,y:260}},randomStart:!0,currentLayer:1,funcSize:function(t){return 1/Math.abs(t)}},scroller:{repeating:!1,alwaysShowCaption:!0,visibleItems:4,theme:"dark",lightbox:{enabled:!1},itemProperties:{delay:0,size:{width:100,height:200},sizeFocused:{width:300,height:200}},center:{left:400,top:100},size:{width:800,height:200},controls:{margin:{x:210,y:158}},funcTop:function(){return 0},funcDiff:function(t){return Math.abs(t)+1},funcLeft:function(t,i){return i.center.left+(t-.5)*i.itemProperties.size.width},funcOpacity:function(){return.8}},pages:{radius:{x:0,y:0},lightbox:{enabled:!1},scaling:1,theme:"page",visibleItems:1,controls:{margin:{x:0,y:0}},strings:{prev:" ",next:" "},center:{left:200,top:200},itemProperties:{size:{width:400,height:400}},funcTop:function(t,i){return i.center.top-i.itemProperties.size.height/2},funcLeft:function(t,i){return i.center.left+t*i.itemProperties.size.width},funcDiff:function(t){return Math.abs(t)+.5}},cubic:{center:{left:300,top:200},visibleItems:5,itemProperties:{size:{width:350,height:350},sizeFocused:{width:350,height:350}},controls:{margin:{x:70,y:330}},funcTop:function(t,i){return i.center.top-i.itemProperties.size.height/2+Math.pow(t/2,3)*i.radius.x},funcLeft:function(t,i){return i.center.left-i.itemProperties.size.width/2+Math.sin(t)*i.radius.x},funcSize:function(t){return Math.pow((Math.PI-Math.abs(t))/Math.PI,3)}},gallery:{special:{itemPadding:2},visibleItems:5,theme:"dark",cropThumbnails:!0,center:{top:145,left:250},size:{height:400,width:500},controls:{margin:{x:10,y:255}},itemProperties:{delay:0,sizeFocused:{width:480,height:280},size:{width:80,height:100}},funcTop:function(t,i){return i.size.height-i.itemProperties.size.height-i.special.itemPadding},funcDiff:function(t){return Math.abs(t)-.5},funcLeft:function(t,i){return i.center.left+(t-.5)*(i.itemProperties.size.width+i.special.itemPadding)},funcOpacity:function(){return.8}},thumbGallery:{special:{columns:3,rows:3,groupSize:9,itemPadding:5,thumbsOffset:{x:500,y:0}},visibleItems:9,wrapIndices:!1,currentLayer:1,switchIndices:!0,cropThumbnails:!0,center:{top:215,left:250},size:{height:430,width:800},controls:{enabled:!1,margin:{x:10,y:255}},itemProperties:{delay:40,sizeFocused:{width:480,height:420},size:{width:94,height:126}},scrollbar:{enabled:!0,stepSize:9,start:2,style:{width:292,right:3,bottom:5}},funcDiff:function(t){return Math.abs(t)},funcOpacity:function(t,i,e){var s;return s=i.currentLayer>i._focusedItem.currentSlot?i.currentLayer-1:i.currentLayer,e>i._focusedItem.currentSlot&&e--,Math.floor((e-1)/i.special.groupSize)===Math.floor((s-1)/i.special.groupSize)?.8:0},funcTop:function(t,i,e){return e>i._focusedItem.currentSlot&&e--,i.special.thumbsOffset.y+i.special.itemPadding+Math.floor((e-1)%i.special.groupSize/i.special.rows)*(i.itemProperties.size.height+i.special.itemPadding)},funcLeft:function(t,i,e){var s,n,o;return n=i.currentLayer>i._focusedItem.currentSlot?i.currentLayer-1:i.currentLayer,e>i._focusedItem.currentSlot&&e--,s=(e-1)%i.special.groupSize%i.special.columns,o=Math.floor((e-1)/i.special.groupSize)-Math.floor((n-1)/i.special.groupSize),i.special.thumbsOffset.x+i.special.itemPadding+(s+i.special.columns*o)*(i.itemProperties.size.width+i.special.itemPadding)}},slider:{theme:"slider",visibleItems:1,fadeTime:1e3,opacityMin:.01,autoRotation:{enabled:!0},center:{top:150,left:300},size:{height:300,width:600},controls:{margin:{x:-1,y:135}},strings:{prev:"<span>&nbsp;</span>",next:"<span>&nbsp;</span>"},itemProperties:{sizeFocused:{width:600,height:300},size:{width:600,height:300}},funcTop:function(){return 0},funcLeft:function(){return 0},funcOpacity:function(){return.02}}}}(jQuery);var __bind=function(t,i){return function(){return t.apply(i,arguments)}};(function(t){return t.rondell||(t.rondell={}),t.rondell.RondellScrollbar=function(){function i(i,e){this.scrollRight=__bind(this.scrollRight,this),this.scrollLeft=__bind(this.scrollLeft,this),this.onScrollbarClick=__bind(this.onScrollbarClick,this),this.onDragStart=__bind(this.onDragStart,this),this.onDrag=__bind(this.onDrag,this),this.setPosition=__bind(this.setPosition,this),this.scrollTo=__bind(this.scrollTo,this),this.updatePosition=__bind(this.updatePosition,this),this._initControls=__bind(this._initControls,this),t.extend(!0,this,t.rondell.defaults.scrollbar,e),this.container=i.addClass(this.classes.container),this._drag={_dragging:!1,_lastDragEvent:0},this.container.addClass(""+this.classes.container+"-"+this.orientation).css(this.style),this._initControls(),this._minX=this.padding+this.scrollLeftControl.outerWidth()+this.scrollControl.outerWidth()/2,this._maxX=this.container.innerWidth()-this.padding-this.scrollRightControl.outerWidth()-this.scrollControl.outerWidth()/2,this.setPosition(this.position,!1,!0)}return i.prototype._initControls=function(){var i;return i='<div><span class="'+this.classes.scrollInner+'">&nbsp;</span></div>',this.scrollLeftControl=t(i).addClass(this.classes.scrollLeft).click(this.scrollLeft),this.scrollRightControl=t(i).addClass(this.classes.scrollRight).click(this.scrollRight),this.scrollControl=t('<div class="'+this.classes.control+'">&nbsp;</div>').css("left",this.container.innerWidth()/2).mousedown(this.onDragStart),this.scrollBackground=t('<div class="'+this.classes.background+'"/>'),this.container.append(this.scrollBackground,this.scrollLeftControl,this.scrollRightControl,this.scrollControl),this.container.add(this.scrollBackground).click(this.onScrollbarClick)},i.prototype.updatePosition=function(t,i){return null==i&&(i=!0),!t||t===this.position||this.start>t||t>this.end?void 0:(this.position=t,i?"function"==typeof this.onScroll?this.onScroll(t,!0):void 0:void 0)},i.prototype.scrollTo=function(t,i,e){var s,n,o;return null==i&&(i=!0),null==e&&(e=!0),this._minX>t||t>this._maxX?void 0:(n=this.scrollControl.stop(!0),o={left:t},i?n.animate(o,this.animationDuration,this.easing):n.css(o),s=Math.round((t-this._minX)/(this._maxX-this._minX)*(this.end-this.start))+this.start,s!==this.position?this.updatePosition(s,e):void 0)},i.prototype.setPosition=function(t,i,e){var s;return null==i&&(i=!0),null==e&&(e=!1),this.repeating&&(this.start>t&&(t=this.end),t>this.end&&(t=this.start)),e||!(this.start>t||t>this.end||t===this.position)?(s=Math.round((t-this.start)/(this.end-this.start)*(this._maxX-this._minX))+this._minX,this.scrollTo(s,!0,i)):void 0},i.prototype.onDrag=function(i){var e,s;return i.preventDefault(),this._drag._dragging?"mouseup"===i.type?(this._drag._dragging=!1,this.scrollControl.removeClass(this.classes.dragging),t(window).unbind("mousemove mouseup",this.onDrag)):(e=0,e="top"===(s=this.orientation)||"bottom"===s?i.pageX-this.container.offset().left:i.pageY-this.container.offset().top,e=Math.max(this._minX,Math.min(this._maxX,e)),this.scrollTo(e,!1)):void 0},i.prototype.onDragStart=function(i){return i.preventDefault(),this._drag._dragging=!0,this.scrollControl.addClass(this.classes.dragging),t(window).bind("mousemove mouseup",this.onDrag)},i.prototype.onScrollbarClick=function(t){return this.scrollTo(t.pageX-this.container.offset().left)},i.prototype.scrollLeft=function(t){var i;return t.preventDefault(),i=this.position-this.stepSize,this.keepStepOrder&&this.stepSize>1&&(i>=this.start?i-=(i-this.start)%this.stepSize:this.repeating&&(i=this.start+Math.floor((this.end-this.start)/this.stepSize)*this.stepSize)),this.setPosition(i)},i.prototype.scrollRight=function(t){var i;return t.preventDefault(),i=this.position+this.stepSize,this.keepStepOrder&&this.stepSize>1&&(i-=(i-this.start)%this.stepSize,this.repeating&&i>this.end&&(i=this.start)),this.setPosition(i)},i}()})(jQuery);var __bind=function(t,i){return function(){return t.apply(i,arguments)}};(function(t){return t.rondell||(t.rondell={}),t.rondell.RondellItem=function(){function i(t,i,e){this.id=t,this.object=i,this.rondell=e,this.runAnimation=__bind(this.runAnimation,this),this.onAnimationFinished=__bind(this.onAnimationFinished,this),this.prepareFadeOut=__bind(this.prepareFadeOut,this),this.prepareFadeIn=__bind(this.prepareFadeIn,this),this.hideCaption=__bind(this.hideCaption,this),this.showCaption=__bind(this.showCaption,this),this.onMouseLeave=__bind(this.onMouseLeave,this),this.onMouseEnter=__bind(this.onMouseEnter,this),this.finalize=__bind(this.finalize,this),this.onError=__bind(this.onError,this),this.onIconLoad=__bind(this.onIconLoad,this),this.refreshDimensions=__bind(this.refreshDimensions,this),this.init=__bind(this.init,this),this.currentSlot=this.id,this.focused=!1,this.hidden=!1,this.animating=!1,this.isNew=!0,this.icon=null,this.resizeable=!0,this.iconCopy=null,this.croppedSize=this.rondell.itemProperties.size,this.sizeSmall=this.rondell.itemProperties.size,this.sizeFocused=this.rondell.itemProperties.sizeFocused,this.objectCSSTarget={},this.objectAnimationTarget={},this.lastObjectAnimationTarget={},this.iconAnimationTarget={},this.lastIconAnimationTarget={},this.animationSpeed=this.rondell.fadeTime,this.isLink=this.object.is("a"),this.referencedImage=null}return i.prototype.init=function(){var i,e,s,n,o,r,h;if(this.object.is("img")&&(this.object=this.object.wrap("<div/>").parent()),this.object.addClass(""+this.rondell.classes.item).data("item",this).css({opacity:0,width:this.sizeSmall.width,height:this.sizeSmall.height,left:this.rondell.center.left-this.sizeFocused.width/2,top:this.rondell.center.top-this.sizeFocused.height/2}),this.isLink&&this.rondell.lightbox.displayReferencedImages)for(n=this.object.attr("href"),s=this._getFiletype(n),h=this.rondell.imageFiletypes,o=0,r=h.length;r>o;o++)if(i=h[o],s===i){this.referencedImage=n;break}return e=this.object.find("img:first"),e.length?(this.icon=e,this.resizeable=!e.hasClass(this.rondell.classes.noScale),this.icon.addClass(this.rondell.classes.image),this.object.addClass(this.rondell.classes.loading),e.width()>0||e[0].complete&&e[0].width>0?window.setTimeout(this.onIconLoad,10):(this.iconCopy=t('<img style="display:none"/>'),t("body").append(this.iconCopy),this.iconCopy.one("load",this.onIconLoad).one("error",this.onError).attr("src",e.attr("src")))):this.finalize()},i.prototype._getFiletype=function(t){return t.substr(t.lastIndexOf(".")+1).toLowerCase()},i.prototype.refreshDimensions=function(){var i,e,s,n,o,r,h,l,a,d,c,u,p,m;return r=(null!=(d=this.iconCopy)?d.width():void 0)||(null!=(c=this.iconCopy)?c[0].width:void 0)||this.icon[0].width||this.icon.width(),o=(null!=(u=this.iconCopy)?u.height():void 0)||(null!=(p=this.iconCopy)?p[0].height:void 0)||this.icon[0].height||this.icon.height(),s=a=r,e=l=o,h=this.rondell.itemProperties.size,n=this.rondell.itemProperties.sizeFocused,i=h,null!=(m=this.iconCopy)&&m.remove(),r&&o?(this.resizeable?(this.icon.addClass(this.rondell.classes.resizeable),l*=h.width/a,a=h.width,l>h.height&&(a*=h.height/l,l=h.height),this.rondell.cropThumbnails&&(this.icon.parent().hasClass(this.rondell.classes.crop)||this.icon.wrap(t("<div>").addClass(this.rondell.classes.crop)),i={width:h.width,height:h.width/a*l},i.height<h.height&&(i={width:h.height/i.height*i.width,height:h.height}),a=h.width,l=h.height),e*=n.width/s,s=n.width,e>n.height&&(s*=n.height/e,e=n.height)):(a=h.width,l=h.height,s=n.width,e=n.height),this.croppedSize=i,this.iconWidth=r,this.iconHeight=o,this.sizeSmall={width:Math.round(a),height:Math.round(l)},this.sizeFocused={width:Math.round(s),height:Math.round(e)}):void 0},i.prototype.onIconLoad=function(){return this.refreshDimensions(),this.finalize()},i.prototype.onError=function(){var t,i;return t=this.rondell.strings.loadingError.replace("%s",this.icon.attr("src")),this.icon.remove(),null!=(i=this.iconCopy)&&i.remove(),this.object.removeClass(this.rondell.classes.loading).addClass(this.rondell.classes.error).html("<p>"+t+"</p>")},i.prototype.finalize=function(){var i,e,s,n,o,r,h;return this.object.removeClass(this.rondell.classes.loading),this.rondell.captionsEnabled&&(e=null,e=this.rondell.cropThumbnails?null!=(n=this.icon)?n.closest("."+this.rondell.classes.crop).siblings():void 0:null!=(o=this.icon)?o.siblings():void 0,(null!=e?e.length:void 0)||this.icon||!this.object.children().length||(e=this.object.children()),(null!=e?e.length:void 0)||(i=this.object.attr("title")||(null!=(r=this.icon)?r.attr("title"):void 0)||(null!=(h=this.icon)?h.attr("alt"):void 0),i&&(e=t("<p>"+i+"</p>"),this.object.append(e))),(null!=e?e.length:void 0)&&(s=e.wrapAll("<div/>").parent().addClass(this.rondell.classes.caption),this.icon&&(this.overlay=s.addClass(this.rondell.classes.overlay)))),this.rondell.onItemInit(this.id)},i.prototype.onMouseEnter=function(){return this.animating||this.hidden||!this.object.is(":visible")?void 0:this.object.addClass(this.rondell.itemHoveredClass).stop(!0).animate({opacity:1},this.rondell.fadeTime,this.rondell.funcEase)},i.prototype.onMouseLeave=function(){return this.object.removeClass(this.rondell.classes.hovered),this.animating||this.hidden?void 0:this.object.stop(!0).animate({opacity:this.objectAnimationTarget.opacity},this.rondell.fadeTime,this.rondell.funcEase)},i.prototype.showCaption=function(){return this.rondell.captionsEnabled&&null!=this.overlay?this.overlay.stop(!0).css({height:"auto",overflow:"auto"}).fadeTo(300,1):void 0},i.prototype.hideCaption=function(){var t;return this.rondell.captionsEnabled&&(null!=(t=this.overlay)?t.is(":visible"):void 0)?this.overlay.stop(!0).css({height:this.overlay.height(),overflow:"hidden"}).fadeTo(200,0):void 0},i.prototype.prepareFadeIn=function(){var t,i,e,s;return this.focused=!0,this.hidden=!1,s=this.sizeFocused.width,e=this.sizeFocused.height,this.lastObjectAnimationTarget=this.objectAnimationTarget,this.objectAnimationTarget={width:s,height:e,left:this.rondell.center.left-s/2,top:this.rondell.center.top-e/2,opacity:1},this.objectCSSTarget={zIndex:this.rondell.zIndex+this.rondell.maxItems,display:"block"},this.animationSpeed=this.rondell.fadeTime,this.icon&&(this.lastIconAnimationTarget=this.iconAnimationTarget,t=0,i=0,this.resizeable||(i=(this.rondell.itemProperties.sizeFocused.height-this.iconHeight)/2,t=(this.rondell.itemProperties.sizeFocused.width-this.iconWidth)/2,this.iconAnimationTarget.marginTop=i,this.iconAnimationTarget.marginLeft=t),this.rondell.cropThumbnails)?this.iconAnimationTarget={marginTop:i,marginLeft:t,width:s,height:e}:void 0},i.prototype.prepareFadeOut=function(){var i,e,s,n,o,r,h,l,a;return this.focused=!1,i=this.currentSlot,a=this.rondell.getRelativeItemPosition(i),o=a[0],r=a[1],n=this.rondell.funcDiff(r-this.rondell.currentLayer,this.rondell,i),this.rondell.currentLayer>r&&(n*=-1),s=this.sizeSmall.width*this.rondell.funcSize(n,this.rondell),e=this.sizeSmall.height*this.rondell.funcSize(n,this.rondell),l=this.rondell.zIndex-o,this.animationSpeed=this.rondell.fadeTime+this.rondell.itemProperties.delay*o,h={width:s,height:e,left:this.rondell.funcLeft(n,this.rondell,i)+(this.rondell.itemProperties.size.width-s)/2,top:this.rondell.funcTop(n,this.rondell,i)+(this.rondell.itemProperties.size.height-e)/2,opacity:0},this.objectCSSTarget={zIndex:l,display:"block"},this.rondell.visibleItems>=o?(h.opacity=this.rondell.funcOpacity(n,this.rondell,i),this.hidden=!1,this.icon&&(this.lastIconAnimationTarget=this.iconAnimationTarget,this.rondell.cropThumbnails&&(this.iconAnimationTarget={marginTop:(this.rondell.itemProperties.size.height-this.croppedSize.height)/2,marginLeft:(this.rondell.itemProperties.size.width-this.croppedSize.width)/2,width:this.croppedSize.width,height:this.croppedSize.height}),this.resizeable||(this.iconAnimationTarget={marginTop:(this.rondell.itemProperties.size.height-this.iconHeight)/2,marginLeft:(this.rondell.itemProperties.size.width-this.iconWidth)/2}))):this.hidden&&t.extend(this.objectCSSTarget,h),this.lastObjectAnimationTarget=this.objectAnimationTarget,this.objectAnimationTarget=h
},i.prototype.onAnimationFinished=function(){return this.animating=!1,this.focused?(this.object.addClass(this.rondell.classes.focused),this.rondell.hovering||this.rondell.alwaysShowCaption||this.rondell._onMobile()?this.showCaption():void 0):this.objectAnimationTarget.opacity<this.rondell.opacityMin?(this.hidden=!0,this.object.css("display","none")):(this.hidden=!1,this.object.css("display","block"))},i.prototype.runAnimation=function(t){if(null==t&&(t=!1),this.object.css(this.objectCSSTarget),!this.hidden){if(!t&&!this.iconAnimationTarget||!this.icon||!this.focused&&this.rondell.equals(this.iconAnimationTarget,this.lastIconAnimationTarget)||this.icon.stop(!0).animate(this.iconAnimationTarget,this.animationSpeed,this.rondell.funcEase),!t&&null==this.objectAnimationTarget||!this.focused&&this.rondell.equals(this.objectAnimationTarget,this.lastObjectAnimationTarget))return this.onAnimationFinished();if(this.animating=!0,this.object.stop(!0).animate(this.objectAnimationTarget,this.animationSpeed,this.rondell.funcEase,this.onAnimationFinished),!this.focused)return this.object.removeClass(this.rondell.classes.focused),this.hideCaption()}},i}()})(jQuery);