<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<body>
	<ui:composition template="/home/template/mainLayout.xhtml">
		<f:metadata>
		    <f:viewParam name="r" value="#{itemSearchBean.request}"/>            
		    <f:viewParam name="p" value="#{itemSearchBean.page}"/>            
	 		<f:event listener="#{itemSearchBean.initCount}" type="preRenderView" />
	 	</f:metadata>
		<ui:define name="mainDiv"> 
		 	<h:outputScript name="js/item.js" target="head" /> 
		 	<h:outputScript target="head" >
				$(function() {
					var result = $.getJSON("/rest/search/item", {
						r : "#{itemSearchBean.request}", 
						p : "#{itemSearchBean.page}"
					}, 
					function(data){
						$("#itemList").addItems(data);
					});		
				});
	 		</h:outputScript> 
			<div>
				<h1>
					Résultat de la recherche "#{itemSearchBean.request}" : #{itemSearchBean.count} résultats
				</h1>
			</div>
			<div id="itemList">
				<div id="addItems" style="display:none;">
					<div class="item">
						<div class="itemImages" />
						<div class="itemInfos" />
						<div class="itemDetails">
							<h2 class="itemTitle" />
							<p class="itemDescription" />
							<ul class="itemWishies" />
						</div>
					</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>